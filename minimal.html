<!doctype html>
<html>
<head>
</head>
<body>
<script>
    console.log("start");

    // from https://webaudio.github.io/web-midi-api/#obtaining-access-to-midi-devices
    function listInputsAndOutputs(midiAccess) {
        for (var entry of midiAccess.inputs) {
            var input = entry[1];
            console.log( "Input port [type:'" + input.type + "'] id:'" + input.id +
                "' manufacturer:'" + input.manufacturer + "' name:'" + input.name +
                "' version:'" + input.version + "'" );
        }
        for (var entry of midiAccess.outputs) {
            var output = entry[1];
            console.log( "Output port [type:'" + output.type + "'] id:'" + output.id +
                "' manufacturer:'" + output.manufacturer + "' name:'" + output.name +
                "' version:'" + output.version + "'" );
        }
    }

    navigator.requestMIDIAccess({ sysex: true })
        .then(function(access) {
            console.log("then()");
            listInputsAndOutputs(access);
            access.onstatechange = function(e) {
                console.log("onstatechange", e.port.name, e.port.manufacturer, e.port.state);
            };
        })
        .catch(
            function(e) {
                console.error(e);
            }
        );

</script>
</body>
